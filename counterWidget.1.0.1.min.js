/**
 * Greenball/counterWidget published under MIT license.
 * @package https://github.com/greenball/counterWidget
 */
(function(e,t){e.widget("ui.counterWidget",{options:{start:0,stop:0,interval:0,step:null,text:"%counter%",addClass:"",round:null},_create:function(){this.options.interval=this.options.interval?this.options.interval:864e5;this._different=Math.abs(this.options.start-this.options.stop);if(!this._different&&!this.options.step){this.options.step=10}if(!this.options.step){this.options.step=this.options.interval/this._different}this._change=this._different/(this.options.interval/this.options.step);this._current=this.options.start;if(!this._change){this._change=this.options.step*.001}if(!this.options.round){this._round=4-this.options.step.toString().length;this._round=this._round<0?0:this._round}else{this._round=this.options.round}this.element.addClass(this.widgetBaseClass+"Main "+this.options.addClass);this._trigger("create",null,this);this.start();this._html()},start:function(){if(!this._func){this._func=setInterval(e.proxy(this._refresh,this),this.options.step);this._trigger("fStart",null,this)}},stop:function(){if(this._func){clearInterval(this._func);this._func=null;this._trigger("fStop",null,this)}},value:function(){return this._current},destroy:function(){this.element.removeClass(this.widgetBaseClass+"Main "+this.options.addClass);this.stop();this.element.empty();e.Widget.prototype.destroy.call(this);this._trigger("destroy",null,this)},_refresh:function(){if(!(this.options.start+this.options.stop)){this._current+=this._change}else if(this.options.start<this.options.stop){this._current+=this._change}else if(this.options.start>this.options.stop){this._current-=this._change}this._html();if(this.options.start<this.options.stop){if(this._current>this.options.stop){return this.destroy()}}else if(this.options.start>this.options.stop){if(this._current<this.options.stop){return this.destroy()}}},_html:function(){this.element.html(this.options.text.replace(/\%counter\%/,this._current.toFixed(this._round)));this._trigger("refresh",null,this)}})})($)